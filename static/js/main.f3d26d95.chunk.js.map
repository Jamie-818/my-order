{"version":3,"sources":["components/Header/index.js","components/OrderItem/index.js","components/OrderList/index.js","components/App/index.js","index.js"],"names":["Header","_Component","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","react_default","a","createElement","className","Component","OrderItem","props","_this","call","handleOpenEditArea","setState","editing","handleCommentChange","event","comment","target","handleClickStars","stars","console","log","handleCancelComment","handleSubmitComment","item_id","data","_this$state","state","onSubmit","_this$props$data","shop_title","title","coupon_start_fee","pict_url","isCommented","src","alt","onClick","renderEditArea","onChange","renderStarts","_this2","map","item","index","lightClass","bind","OrderList","handleSubmit","newDate","objectSpread","fetch","then","res","ok","json","result_list","map_data","catch","error","_this3","components_OrderItem","App","components_Header","components_OrderList","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.f3d26d95.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport class Header extends Component {\r\n  render() {\r\n    return <header className='header'>我的订单</header>;\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport class OrderItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      editing: false,\r\n      stars: props.data.stars || 0,\r\n      comment: props.data.comment || \"\"\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      shop_title,\r\n      title,\r\n      coupon_start_fee,\r\n      pict_url,\r\n      isCommented\r\n    } = this.props.data;\r\n\r\n    return (\r\n      <div className=\"orderItem\">\r\n        <div className=\"orderItem_picContainer\">\r\n          {/* orderItem_picContainer--  :BEM  css命名规范 */}\r\n          <img className=\"orderItem__pic\" src={pict_url} alt=\"PIC\" />\r\n        </div>\r\n        <div className=\"orderItem__content\">\r\n          <div className=\"orderItem__product\">{title}</div>\r\n          <div className=\"orderItem__shop\">{shop_title}</div>\r\n          <div className=\"OrderItem__detail\">\r\n            <div className=\"orderItem__price\">{coupon_start_fee}</div>\r\n            <div>\r\n              {isCommented ? (\r\n                <button className=\"orderItem__btn orderItem__btn--gray\">\r\n                  已评价\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  onClick={this.handleOpenEditArea}\r\n                  className=\"orderItem__btn orderItem__btn--red\"\r\n                >\r\n                  评价\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {this.state.editing ? this.renderEditArea() : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderEditArea() {\r\n    return (\r\n      <div className=\"orderItem__commentContainer\">\r\n        <textarea\r\n          onChange={this.handleCommentChange}\r\n          value={this.state.comment}\r\n          className=\"orderItem__comment\"\r\n        />\r\n        {this.renderStarts()}\r\n        {!this.props.data.isCommented ? (\r\n          <button\r\n            className=\"orderItem__btn orderItem__btn--red\"\r\n            onClick={this.handleSubmitComment}\r\n          >\r\n            提交\r\n          </button>\r\n        ) : null}\r\n        <button\r\n          className=\"orderItem__btn orderItem__btn--gray\"\r\n          onClick={this.handleCancelComment}\r\n        >\r\n          取消\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderStarts() {\r\n    const { stars } = this.state;\r\n    return (\r\n      <div>\r\n        {[1, 2, 3, 4, 5].map((item, index) => {\r\n          const lightClass = stars >= item ? \"orderItem__star--light\" : \"\";\r\n          return (\r\n            <span\r\n              key={index}\r\n              className={\"orderItem__star \" + lightClass}\r\n              onClick={this.handleClickStars.bind(this, item)}\r\n            >\r\n              ★\r\n            </span>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleOpenEditArea = () => {\r\n    this.setState({\r\n      editing: true\r\n    });\r\n  };\r\n\r\n  handleCommentChange = event => {\r\n    this.setState({\r\n      comment: event.target.value\r\n    });\r\n  };\r\n\r\n  handleClickStars = stars => {\r\n    console.log(\"stars:\", stars);\r\n    this.setState({\r\n      stars: stars\r\n    });\r\n  };\r\n\r\n  handleCancelComment = () => {\r\n    this.setState({\r\n      editing: false,\r\n      comment: this.props.comment || \"\",\r\n      stars: this.props.stars || 0\r\n    });\r\n  };\r\n\r\n  handleSubmitComment = () => {\r\n    const { item_id } = this.props.data;\r\n    const { comment, stars } = this.state;\r\n    this.setState({\r\n      editing: false\r\n    });\r\n\r\n    this.props.onSubmit(item_id, comment, stars);\r\n  };\r\n}\r\n\r\nexport default OrderItem;\r\n","import React, { Component } from \"react\";\r\nimport OrderItem from \"../OrderItem\";\r\n\r\nexport class OrderList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(\"./mock/orders.json\")\r\n      .then(res => {\r\n        if (res.ok) {\r\n          res\r\n            .json()\r\n            .then(data => {\r\n              this.setState({\r\n                data: data.data.result_list.map_data\r\n              });\r\n            })\r\n            .catch(error => console.error(\"请求数据失败a: \", error));\r\n        }\r\n      })\r\n      .catch(error => console.error(\"请求数据失败b: \", error));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.state.data.map(item => {\r\n          return (\r\n            <OrderItem\r\n              key={item.item_id}\r\n              data={item}\r\n              onSubmit={this.handleSubmit}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleSubmit = (item_id, comment, stars) => {\r\n    // fetch(\"/saveComment\").then(() => {});\r\n    const newDate = this.state.data.map(item => {\r\n      return item.item_id === item_id\r\n        ? {\r\n            ...item,\r\n            comment,\r\n            stars,\r\n            isCommented: true\r\n          }\r\n        : item;\r\n    });\r\n    this.setState({\r\n      data: newDate\r\n    });\r\n  };\r\n}\r\n\r\nexport default OrderList;\r\n","import React from \"react\";\nimport \"./style.css\";\nimport Header from \"../Header\";\nimport OrderList from \"../OrderList\";\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <Header />\n      <OrderList />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}